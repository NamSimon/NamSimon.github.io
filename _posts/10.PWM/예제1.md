
![[Pasted image 20240614233606.png]]


```c
#include<avr/io.h>


int main(void){
	unsigned char tmp;
	init();
	PORTB = 0x00;
	while(1) {
		tmp = PINE & 0x30;
		switch(tmp) {
			case 0x00 : OCR2 = 0xFF; break;
			case 0x10 : OCR2 = 0x7F; break;
			case 0x20 : OCR2 = 0x3F; break;
			case 0x30 : OCR2 = 0x00; break;
			default : break;
		}
	}
	return 0;
}





void init()
{

	// I/O Port 초기화
	DDRA = 0xFF;
	DDRB = 0xD0; `1110 0000`
	DDRC = 0xFF;
	DDRG = 0x0F;
	DDRE = 0x02;
	DDRF = 0x00;

	// 외부 인터럽트 (Switch1/2) Enable
	EICRB = 0x0A;
	EIMSK = 0x30;

	// Timer/Counter0 초기화
	TCCR0 = 0x06;
	TCNT0 = 0x83;
	
	// Timer/Counter1 초기화
	TCCR1A = 0x00;
	TCCR1B = 0x0A;
	TCCR1C = 0x00;
	OCR1A = 0x3BA;

	// Timer/Counter2 초기화
	TCCR2 = 0x6B;// 모터 //0110 1011 


	// Timer/Counter3 초기화
	TCCR3A = 0x00;
	TCCR3B = 0x0B;
	TCCR3C = 0x00;
	OCR3A = 0x1869;

	// Timer Interrupt Enable
	TIMSK = 0x01|0x10;
	ETIMSK =0x10;

	// UART 초기화
	UCSR0A = 0x00;
	UCSR0B = 0x98;
	UCSR0C = 0x06;
	UBRR0H = 0;
	UBRR0L = 0x67;

	// AD 변환기 초기화
	ADMUX = 0x00;
	ADCSRA = 0x87;

	sei();
}




```